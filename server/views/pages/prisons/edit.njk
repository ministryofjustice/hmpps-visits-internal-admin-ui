{% extends "../../partials/layout.njk" %}
{%- from "govuk/components/tag/macro.njk" import govukTag -%}
{%- from "govuk/components/button/macro.njk" import govukButton -%}
{%- from "moj/components/button-menu/macro.njk" import mojButtonMenu -%}
{% from "govuk/components/warning-text/macro.njk" import govukWarningText %}
{%- from "moj/components/banner/macro.njk" import mojBanner -%}

{% set pageHeaderTitle = prisonName %}
{% set pageTitle = applicationName + " - " + pageHeaderTitle %}

{% set breadCrumbs = {
  enabled: true,
  pageTitle:  pageHeaderTitle,
  data: [{ title: 'Supported prisons', href: '/prisons' }]
} %}

{% set prisonStatus = 'Active' if prisonInfo.active else 'Inactive' %}

{% block content %}

<div class="govuk-grid-row">
  <div class="govuk-grid-column-full">

  {% if errors | length %}
    {% set errorSummaryList = errors | errorSummaryList %}

    {{ govukErrorSummary({
      titleText: "There is a problem",
      errorList:  errorSummaryList 
    }) }}
  {% endif %}

  {% if confirmedChange %}
    {% set confirmedChangeHtml %}
        {{ govukWarningText({
          classes: "govuk-!-margin-bottom-0",
          html: "<p class='govuk-!-font-size-24 govuk-!-font-weight-bold'> " + prisonName + " has been sucessfully changed to " + prisonStatus + "</p>",
          iconFallbackText: "Warning",
          attributes: {
            "data-test": "slot-change-reason"
        }
      }) }}
    {% endset %}

    {{ mojBanner({
      classes: "govuk-!-padding-left-4",
      html: confirmedChangeHtml
    }) }}
  {% endif %}

    <h1 class="govuk-heading-l">
      <span>{{ pageHeaderTitle }}</span>
    </h1>

    {% set html %}
      <h3 class="govuk-notification-banner__heading">
        Training outcome recorded and trainee withdrawn
      </h3>
      <p class="govuk-body">Contact <a class="govuk-notification-banner__link" href="#">example@department.gov.uk</a> if you think thereâ€™s a problem.</p>
    {% endset %}

    <p>{{ prisonName }} is: {{ govukTag({ text: prisonStatus, classes: "govuk-tag--blue"}) }}</p>

    {{ mojButtonMenu({
      items: [
        {
          text: "Enable",
          preventDoubleClick: true,
          disabled: true if prisonInfo.active else false,
          href: "activate"
        }, {
          text: "Disable",
          preventDoubleClick: true,
          classes: "govuk-button--secondary",
          disabled: false if prisonInfo.active else true,
          href: "deactivate"
        }
      ]
    }) }}

  </div>
</div>

{% endblock %}
